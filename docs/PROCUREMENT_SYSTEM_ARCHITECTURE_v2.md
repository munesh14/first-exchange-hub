# First Exchange LLC - Procurement System Architecture v2.0

**Version:** 2.0  
**Date:** January 17, 2026  
**Status:** Evolving Document  
**Developer:** Munesh C

---

## ğŸ¯ Vision

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   CHAIN-CENTRIC PROCUREMENT                                         â”‚
â”‚                                                                     â”‚
â”‚   Everything flows through PROCUREMENT CHAINS                       â”‚
â”‚                                                                     â”‚
â”‚   Chain â†’ [Q] â†’ [LPO] â†’ [DO] â†’ [PI] â†’ [INV] â†’ [PAY] â†’ Complete    â”‚
â”‚            â†‘      â†‘      â†‘      â†‘       â†‘       â†‘                  â”‚
â”‚         (All components are OPTIONAL - user chooses what's needed) â”‚
â”‚                                                                     â”‚
â”‚   Key Principles:                                                   â”‚
â”‚   â€¢ No document silos - all docs live inside chains                 â”‚
â”‚   â€¢ Visual progress indicators                                      â”‚
â”‚   â€¢ Clear "next action" guidance                                    â”‚
â”‚   â€¢ AI-assisted data extraction with human review                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Current State

### Backend (Express API - Port 3010)

| Module | Status | Notes |
|--------|--------|-------|
| Chains | âœ… Working | CRUD, stats, status management |
| Quotations | âœ… Working | CRUD, UUID support |
| LPOs | âœ… Working | CRUD, approval workflow |
| Delivery Orders | âœ… Working | CRUD, receive functionality |
| Invoices | âœ… Working | CRUD, approval workflow |
| Payments | âœ… Working | CRUD, auto-completion |
| Assets | âœ… Working | CRUD, depreciation |
| Lookups | âœ… Working | Vendors, departments, branches, users |
| AI Extraction | âš ï¸ Broken | 500 errors - needs fix |

### Frontend (React - Port 3008)

| Component | Status | Notes |
|-----------|--------|-------|
| Chain List | âœ… Working | Basic list view |
| Chain Detail | âš ï¸ Needs Redesign | Not chain-centric |
| Document Pages | âš ï¸ Siloed | Not inside chain context |
| Dashboard | âš ï¸ Basic | Needs redesign |
| Extraction UI | âŒ Missing | No review/edit screen |

### Infrastructure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ubuntu VM (172.16.35.76)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ mssql-invoice   â”‚     â”‚ procurement-api â”‚                   â”‚
â”‚  â”‚ Port: 1436      â”‚â—„â”€â”€â”€â”€â”‚ Port: 3010      â”‚                   â”‚
â”‚  â”‚ (Docker)        â”‚     â”‚ (Node.js)       â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                 â”‚                               â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                          â”‚ Vite Dev    â”‚                       â”‚
â”‚                          â”‚ Port: 3008  â”‚                       â”‚
â”‚                          â”‚ (React)     â”‚                       â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                 â”‚
â”‚  Stopped: n8n-invoice (replaced by Express API)                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ Phased Development Plan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  PHASE 1          PHASE 2          PHASE 3          PHASE 4        â”‚
â”‚  Foundation       Chain UI         Documents        Polish          â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Fix AI  â”‚     â”‚ New     â”‚     â”‚ Add Doc â”‚     â”‚ Reports â”‚      â”‚
â”‚  â”‚ Extract â”‚â”€â”€â”€â”€â–¶â”‚ Dashboardâ”‚â”€â”€â”€â”€â–¶â”‚ Inside  â”‚â”€â”€â”€â”€â–¶â”‚ & Print â”‚      â”‚
â”‚  â”‚ + Reviewâ”‚     â”‚ + Chain â”‚     â”‚ Chain   â”‚     â”‚         â”‚      â”‚
â”‚  â”‚ Screen  â”‚     â”‚ Detail  â”‚     â”‚ Context â”‚     â”‚         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                     â”‚
â”‚  ~2 days          ~3 days          ~3 days          ~2 days        â”‚
â”‚                                                                     â”‚
â”‚  â•â•â•â•â•â•â•â•         â•â•â•â•â•â•â•â•         â•â•â•â•â•â•â•â•         â•â•â•â•â•â•â•â•       â”‚
â”‚  CURRENT          NEXT             THEN             LATER          â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Phase 1: Foundation

**Goal:** Fix AI extraction with review/edit capability

**Duration:** ~2 days

### Tasks

```
1.1 Fix Extraction Service
    â”œâ”€â”€ Learn from n8n workflow (what worked)
    â”œâ”€â”€ Handle PDF upload
    â”œâ”€â”€ Convert PDF to image (poppler-utils)
    â””â”€â”€ Send to GPT-4o Vision API

1.2 Create Extraction Review Screen
    â”œâ”€â”€ Split view (PDF preview + editable form)
    â”œâ”€â”€ All fields editable
    â”œâ”€â”€ Add/remove line items
    â””â”€â”€ Recalculate totals on edit

1.3 Save to Chain
    â”œâ”€â”€ Create quotation record
    â”œâ”€â”€ Link to chain
    â””â”€â”€ Update chain status
```

### Extraction Review Screen Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REVIEW EXTRACTED DATA                              [Save & Continue]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      â”‚  â”‚                                      â”‚â”‚
â”‚  â”‚    PDF PREVIEW       â”‚  â”‚  EXTRACTED DATA (Editable)           â”‚â”‚
â”‚  â”‚                      â”‚  â”‚                                      â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  Vendor:  [IT Park Computer LLC   ] â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  Date:    [30/12/2025            ]  â”‚â”‚
â”‚  â”‚   â”‚  Quotation   â”‚   â”‚  â”‚  Valid:   [29/01/2026            ]  â”‚â”‚
â”‚  â”‚   â”‚  Document    â”‚   â”‚  â”‚  Ref:     [QTN-ITPC/2025/0847    ]  â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚                                      â”‚â”‚
â”‚  â”‚   â”‚  (Scrollable)â”‚   â”‚  â”‚  LINE ITEMS                          â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  â”‚ # â”‚Description â”‚ Qty â”‚Unit Priceâ”‚â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  â”‚ 1 â”‚Dell Laptop â”‚ 3   â”‚ 385.000  â”‚â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  â”‚ 2 â”‚HP Printer  â”‚ 2   â”‚ 125.000  â”‚â”‚â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â”‚  â”‚ 3 â”‚Keyboard    â”‚ 5   â”‚  18.500  â”‚â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚                      â”‚  â”‚  [+ Add Row]           [ğŸ—‘ï¸ Remove]   â”‚â”‚
â”‚  â”‚  [â—„ Prev] [Next â–º]   â”‚  â”‚                                      â”‚â”‚
â”‚  â”‚                      â”‚  â”‚  Subtotal:  [1,782.500] OMR          â”‚â”‚
â”‚  â”‚                      â”‚  â”‚  VAT (5%):  [   89.125] OMR          â”‚â”‚
â”‚  â”‚                      â”‚  â”‚  Total:     [1,871.625] OMR          â”‚â”‚
â”‚  â”‚                      â”‚  â”‚                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  [â† Back to Chain]                        [Save & Create Quotation] â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Deliverable

- Upload PDF â†’ AI extracts â†’ User reviews/edits â†’ Saves to chain âœ“

---

## ğŸ“‹ Phase 2: Chain-Centric UI

**Goal:** Rebuild dashboard and navigation around chains

**Duration:** ~3 days

### Tasks

```
2.1 New Dashboard Layout
    â”œâ”€â”€ Stats cards (active, pending, completed, total value)
    â”œâ”€â”€ Chain list with visual pipeline indicators
    â””â”€â”€ Quick filters (status, department, date)

2.2 Chain Detail Page Redesign
    â”œâ”€â”€ Workflow progress bar
    â”œâ”€â”€ Documents in tabs/sections
    â”œâ”€â”€ Activity timeline
    â””â”€â”€ "Next Action" button

2.3 New Chain Creation Flow
    â”œâ”€â”€ Basic info (title, vendor, department)
    â”œâ”€â”€ Select which documents needed (checkboxes)
    â””â”€â”€ Then add documents inside chain
```

### Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROCUREMENT DASHBOARD                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Active     â”‚ â”‚   Pending    â”‚ â”‚  Completed   â”‚ â”‚   Total    â”‚ â”‚
â”‚  â”‚   Chains     â”‚ â”‚   Approval   â”‚ â”‚  This Month  â”‚ â”‚   Value    â”‚ â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚ â”‚            â”‚ â”‚
â”‚  â”‚     12       â”‚ â”‚      5       â”‚ â”‚      8       â”‚ â”‚  45,230    â”‚ â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚ â”‚    OMR     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  [+ New Chain]                    ğŸ” Search    [Filter â–¼] [Sort â–¼] â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PROCUREMENT CHAINS                                              â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚  PC-2026-0007 â”‚ IT Equipment Purchase                          â”‚â”‚
â”‚  â”‚  â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—‹â”â”â”â”â—‹                    Status: IN PROGRESS  â”‚â”‚
â”‚  â”‚  Q    LPO  DO   INV  PAY                 Vendor: IT Park LLC   â”‚â”‚
â”‚  â”‚                                          Amount: 1,871.63 OMR  â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚  PC-2026-0006 â”‚ Office Furniture                               â”‚â”‚
â”‚  â”‚  â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—                    Status: COMPLETED âœ“  â”‚â”‚
â”‚  â”‚  Q    LPO  DO   INV  PAY                 Vendor: Al Maha       â”‚â”‚
â”‚  â”‚                                          Amount: 3,200.00 OMR  â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚  PC-2026-0005 â”‚ Security Cameras                               â”‚â”‚
â”‚  â”‚  â—â”â”â”â”â—â”â”â”â”â—‹â”â”â”â”â—‹â”â”â”â”â—‹                    Status: PENDING LPO  â”‚â”‚
â”‚  â”‚  Q    LPO  DO   INV  PAY                 Vendor: SecureTech    â”‚â”‚
â”‚  â”‚                                          Amount: 5,400.00 OMR  â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  Showing 1-10 of 24 chains                    [â—„] [1] [2] [3] [â–º]  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend: â— = Completed    â—‹ = Pending    â— = In Progress
```

### Chain Detail Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back to Chains                                    [Edit] [Delete]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  PC-2026-0007: IT Equipment Purchase                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Vendor: IT Park Computer LLC          Department: IT           â”‚â”‚
â”‚  â”‚ Created: 14 Jan 2026                  Status: IN PROGRESS      â”‚â”‚
â”‚  â”‚ Total Value: 1,871.625 OMR            Balance: 1,871.625 OMR   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  WORKFLOW PROGRESS                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                â”‚â”‚
â”‚  â”‚    [Q]â”â”â”â”â”â”â”â”[LPO]â”â”â”â”â”â”â”â”[DO]â”â”â”â”â”â”â”â”[INV]â”â”â”â”â”â”â”â”[PAY]     â”‚â”‚
â”‚  â”‚     âœ“           âœ“           âœ“           â—‹            â—‹         â”‚â”‚
â”‚  â”‚  Quotation    Approved    Received    Pending      Pending     â”‚â”‚
â”‚  â”‚                                                                â”‚â”‚
â”‚  â”‚                              â–²                                 â”‚â”‚
â”‚  â”‚                         YOU ARE HERE                           â”‚â”‚
â”‚  â”‚                                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â”‚  STAGES     â”‚  QUOTATION (Q-2026-0001)               [View â–º] â”‚â”‚
â”‚  â”‚             â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚  âœ“ Quotationâ”‚  Vendor: IT Park Computer LLC                   â”‚â”‚
â”‚  â”‚             â”‚  Uploaded: 14 Jan 2026 by Munesh C              â”‚â”‚
â”‚  â”‚  âœ“ LPO      â”‚  Items: 5 | Total: 1,871.625 OMR                â”‚â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â”‚  âœ“ Delivery â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚    Order    â”‚                                                  â”‚â”‚
â”‚  â”‚             â”‚  LPO (FE/LPO/008/26)                   [View â–º] â”‚â”‚
â”‚  â”‚  â—‹ Invoice  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚             â”‚  Approved: 15 Jan 2026 by GM                    â”‚â”‚
â”‚  â”‚  â—‹ Payment  â”‚  Status: APPROVED âœ“                              â”‚â”‚
â”‚  â”‚             â”‚  [Download PDF]                                  â”‚â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â”‚             â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â”‚             â”‚  DELIVERY ORDER (DO-2026-001)          [View â–º] â”‚â”‚
â”‚  â”‚             â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚             â”‚  Received: 16 Jan 2026                          â”‚â”‚
â”‚  â”‚             â”‚  Status: RECEIVED âœ“                              â”‚â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â”‚             â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â”‚             â”‚           [+ Add Invoice]                        â”‚â”‚
â”‚  â”‚             â”‚         (Next recommended action)                â”‚â”‚
â”‚  â”‚             â”‚                                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  ACTIVITY LOG                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 16 Jan 10:30  DO marked as received by Munesh C               â”‚â”‚
â”‚  â”‚ 15 Jan 14:20  LPO approved by Dr. Ghazi (GM)                  â”‚â”‚
â”‚  â”‚ 15 Jan 11:15  LPO approved by George J (Dept Head)            â”‚â”‚
â”‚  â”‚ 14 Jan 16:45  LPO created from quotation                      â”‚â”‚
â”‚  â”‚ 14 Jan 15:30  Quotation uploaded by Munesh C                  â”‚â”‚
â”‚  â”‚ 14 Jan 15:28  Chain created by Munesh C                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Deliverable

- New dashboard with visual chain pipeline âœ“
- Chain detail page with all documents inside âœ“
- Create chain flow working âœ“

---

## ğŸ“‹ Phase 3: Documents Inside Chains

**Goal:** All document operations happen within chain context

**Duration:** ~3 days

### Tasks

```
3.1 Add Quotation (inside chain)
    â”œâ”€â”€ Upload PDF â†’ Review â†’ Save
    â””â”€â”€ Or manual entry option

3.2 Create LPO (from quotation)
    â”œâ”€â”€ Pre-fill from quotation data
    â”œâ”€â”€ Edit before submit
    â””â”€â”€ Approval workflow (Dept Head â†’ GM â†’ Final)

3.3 Add Delivery Order
    â”œâ”€â”€ Link to LPO
    â””â”€â”€ Mark items received

3.4 Add Invoice
    â”œâ”€â”€ Link to LPO
    â”œâ”€â”€ Approval workflow
    â””â”€â”€ Due date tracking

3.5 Add Payment
    â”œâ”€â”€ Link to invoice
    â”œâ”€â”€ Payment modes
    â””â”€â”€ Auto-complete chain when fully paid

3.6 Pending Approvals View
    â”œâ”€â”€ Filter by approval type
    â””â”€â”€ Approve/reject in chain context
```

### Deliverable

- Full procurement workflow inside chains âœ“
- All document types working âœ“
- Approval workflows functional âœ“

---

## ğŸ“‹ Phase 4: Polish & Reports

**Goal:** Production-ready system

**Duration:** ~2 days

### Tasks

```
4.1 PDF Generation
    â”œâ”€â”€ LPO PDF with company letterhead
    â”œâ”€â”€ Invoice print format
    â””â”€â”€ Chain summary report

4.2 Reports
    â”œâ”€â”€ Monthly procurement summary
    â”œâ”€â”€ Pending approvals report
    â”œâ”€â”€ Vendor analysis
    â””â”€â”€ Department spending

4.3 UI Polish
    â”œâ”€â”€ Loading states
    â”œâ”€â”€ Error messages
    â”œâ”€â”€ Empty states
    â””â”€â”€ Mobile responsive

4.4 Testing & Deployment
    â”œâ”€â”€ End-to-end testing
    â”œâ”€â”€ Docker build for production
    â””â”€â”€ Documentation
```

### Deliverable

- Production-ready system âœ“
- All reports working âœ“
- Deployed and documented âœ“

---

## ğŸ§­ Navigation Structure

### Sidebar (Final)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚  FIRST EXCHANGE LLC     â”‚
â”‚  Procurement System     â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚  ğŸ“Š Dashboard           â”‚
â”‚                         â”‚
â”‚  ğŸ“¦ Procurement         â”‚
â”‚     â”œâ”€ All Chains       â”‚
â”‚     â””â”€ + New Chain      â”‚
â”‚                         â”‚
â”‚  ğŸ“‹ Asset Register      â”‚
â”‚                         â”‚
â”‚  ğŸ“ˆ Reports             â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚  ğŸ‘¤ Munesh C            â”‚
â”‚     IT Department       â”‚
â”‚     [Logout]            â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Technical Reference

### API Endpoints (Express - Port 3010)

```
/api/chains              - Procurement chains
/api/quotations          - Quotations
/api/lpos                - Local Purchase Orders
/api/delivery-orders     - Delivery Orders
/api/invoices            - Invoices
/api/payments            - Payments
/api/assets              - Assets
/api/lookups             - Reference data (vendors, departments, etc.)
/api/extract             - AI extraction (to be fixed)
```

### Database (SQL Server - Port 1436)

```
Container: mssql-invoice
Database:  FE_InvoiceSystem
User:      sa
Password:  14Msc0#1109
```

### Frontend (React - Port 3008)

```
Location: ~/Documents/dashboards/first-exchange-hub
Dev Server: npm run dev -- --host 0.0.0.0
```

### Backend (Express - Port 3010)

```
Location: ~/Documents/procurement-api
Dev Server: npm run dev
```

---

## ğŸ“ Change Log

| Date | Version | Changes |
|------|---------|---------|
| 2026-01-17 | 2.0 | Complete architecture redesign - chain-centric approach |
| 2026-01-14 | 1.2 | Added document storage, asset carryforward |
| 2026-01-12 | 1.1 | Initial procurement chain architecture |

---

## âœ… Phase Completion Checklist

### Phase 1: Foundation
- [ ] 1.1 Fix extraction service
- [ ] 1.2 Create extraction review screen
- [ ] 1.3 Save to chain working

### Phase 2: Chain-Centric UI
- [ ] 2.1 New dashboard layout
- [ ] 2.2 Chain detail page redesign
- [ ] 2.3 New chain creation flow

### Phase 3: Documents Inside Chains
- [ ] 3.1 Add quotation inside chain
- [ ] 3.2 Create LPO from quotation
- [ ] 3.3 Add delivery order
- [ ] 3.4 Add invoice
- [ ] 3.5 Add payment
- [ ] 3.6 Pending approvals view

### Phase 4: Polish & Reports
- [ ] 4.1 PDF generation
- [ ] 4.2 Reports
- [ ] 4.3 UI polish
- [ ] 4.4 Testing & deployment

---

*This is a living document. Update as the project evolves.*
